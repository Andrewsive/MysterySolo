import { Script } from './types';

export const SCRIPTS: Script[] = [
  {
    id: 'demo',
    title: '午夜书房',
    difficulty: 2,
    durationMin: 25,
    intro: '一场暴雨让你被困在书房。线索散落在旧书与窗棂间，你需要在零点前串联记忆，找到逃脱的正确顺序。',
    tagline: '雨夜独白 · 线索步步揭开',
    tags: ['古宅', '线索追踪', '单线解谜'],
    genre: '悬疑',
    recommendedFocus: '适合喜欢慢推理的玩家',
    mood: '压抑却温柔的雨夜',
    highlight: '以日记与物件串联的线索网',
    highlights: [
      { title: '日记引导', description: '通过手札的只言片语获取下一步行动提示。' },
      { title: '道具互动', description: '钥匙、边门等道具关联，触发不同剧情分支。' },
      { title: '情绪线索', description: '暴雨与灯光构建情感氛围，触发回忆片段。' }
    ],
    sizeMB: 32,
    releaseDaysAgo: 12,
    rating: 4.6,
    offlineAvailable: true,
    hints: [
      { id: 'demo-h1', text: '手札与边门之间存在时间限制，注意日记中的时间线。' },
      { id: 'demo-h2', text: '钥匙不仅可以开门，也许还代表某个数字或日期。' }
    ],
    start: 'start',
    scenes: [
      {
        id: 'start',
        text: '【暴雨夜·书房】\n\n你在书房醒来，头痛欲裂。窗外雷声轰鸣，墙上的时钟指向晚上 23:05。\n\n书房门被反锁，你记不清为何会在这里。桌面上散落着一本泛黄的手札、一把生锈的钥匙，墙角还有一盏摇曳的煤油灯。窗户半开，冷风吹进。\n\n🎯 【任务目标】\n· 探查书房内的物品，收集线索\n· 在午夜（00:00）前找到逃脱方法\n· 解开藏在记忆中的秘密\n\n⏰ 距离午夜还有 55 分钟\n\n💡 新手提示：每个选项都会推进剧情或获得线索，大胆选择吧！',
        choices: [
          { text: '📖 翻阅手札（看起来很重要）', next: 'diary' },
          { text: '🔑 检查钥匙（上面有刻字）', next: 'key' },
          { text: '📚 搜查书架（也许有发现）', next: 'bookshelf' }
        ]
      },
      {
        id: 'diary',
        text: '【线索：手札】\n\n你小心翼翼地翻开手札，纸张被雨水打湿，字迹模糊但依然能辨认：\n\n💌 "1201...午夜前锁上边门，勿回头..."\n💌 "雷雨夜的约定...我会在那里等你..."\n\n手札末尾署名已无法辨认，但你隐约感到一阵心痛。这些话仿佛触动了你封存的记忆...\n\n✅ 【获得线索 1/4】《神秘手札》\n💭 推理线索：1201 是什么意思？边门在哪里？为什么要"锁上"门？\n\n⏰ 现在是 23:10',
        gainClues: ['note_diary'],
        choices: [
          { text: '🔍 继续搜查书房（还有其他线索）', next: 'start_explored' },
          { text: '🚪 立即寻找边门（线索不足，可能遗漏重要信息）', next: 'search_door' }
        ]
      },
      {
        id: 'key',
        text: '【线索：钥匙】\n\n你拿起这把古旧的钥匙，表面覆盖着铜绿。转到灯光下仔细观察：\n\n🔑 钥匙柄上刻着"1201"四个数字\n🔑 齿位有明显的水渍和泥土痕迹\n🔑 这个形状...是边门的钥匙！\n\n记忆逐渐清晰：这是通往后院的旧门，多年未开。但钥匙上的水渍说明，有人最近用过它...\n\n✅ 【获得线索 2/4】《边门钥匙》（已自动装备）\n💭 推理线索：1201 与手札上的数字相同！这不是巧合。\n\n⏰ 现在是 23:15',
        gainClues: ['key_info'],
        setFlags: { hasKey: true },
        choices: [
          { text: '🔍 带上钥匙，继续搜查书房（建议收集更多线索）', next: 'start_explored' },
          { text: '🚪 立即前往边门使用钥匙（可能错过重要线索）', next: 'search_door' }
        ]
      },
      {
        id: 'bookshelf',
        text: '【书架探索】\n\n你走向布满灰尘的书架，随手抽出一本泛黄的日记本。封面没有标题，翻开第一页：\n\n📔 "12月1日，雨夜。我决定在边门等她最后一次...如果她来了，我会..."\n\n后面的页面被整齐地撕掉了，只剩下参差的纸边。\n\n你注意到书架背后墙面有划痕，似乎有人曾试图移动书架寻找什么...\n\n✅ 【获得线索 3/4】《撕毁的日记》\n💭 推理串联：\n   · 手札提到"1201"和"边门"\n   · 钥匙刻着"1201"\n   · 日记写于"12月1日"（12/01）\n   · 所有线索都指向同一个地点：边门！\n\n⏰ 现在是 23:20',
        gainClues: ['diary_torn'],
        choices: [
          { text: '🔍 还想再检查一下书房（可能还有隐藏线索）', next: 'start_explored' }
        ]
      },
      {
        id: 'start_explored',
        text: '【书房·推理时刻】\n\n你站在书房中央，雷声渐弱，时钟指向 23:25。现在是整理线索的时候了。\n\n📋 【已收集线索回顾】\n✅ 神秘手札："1201...午夜前锁上边门，勿回头"\n✅ 边门钥匙：刻着"1201"，有水渍\n✅ 撕毁日记："12月1日，雨夜，在边门等她"\n\n💡 【推理结论】\n所有线索都指向同一个答案：\n   → 1201 = 12月1日\n   → 约定地点 = 边门\n   → 你需要在午夜前到达边门\n\n但书房里还有一盏煤油灯没有检查，也许藏着最后的线索？\n\n⏰ 距离午夜还有 35 分钟',
        choices: [
          { text: '🕯️ 检查煤油灯（最后的线索，建议查看）', next: 'lamp' },
          { text: '🚪 现在就前往边门（线索已足够，推进剧情）', next: 'search_door' }
        ]
      },
      {
        id: 'lamp',
        text: '【煤油灯的秘密】\n\n你走近那盏摇曳的煤油灯，橘黄色的光芒温暖而柔和。俯身查看，发现底座刻着一行小字：\n\n✨ "记忆之门只为勇敢者开启"\n\n灯光映照在墙上，你突然注意到一个相框——那是一幅褪色的老照片：\n\n📷 照片中，你和一个模糊的身影站在雨中微笑\n📷 背景正是那扇边门...\n📷 照片背面写着："12.01 雨夜，不见不散"\n\n记忆的闸门被打开，往事涌上心头...那个雨夜，你因为恐惧而爽约。她一直在边门外等你，直到...\n\n✅ 【获得线索 4/4】《褪色照片》（全部线索已收集！）\n💭 真相揭晓：这不是逃脱游戏，而是记忆的考验。边门是你心中的"记忆之门"，只有勇敢面对过去，才能获得解脱。\n\n⏰ 现在是 23:40，还有 20 分钟到午夜',
        gainClues: ['photo'],
        choices: [
          { text: '🚪 前往边门，揭开真相（完成最终挑战）', next: 'search_door' }
        ]
      },
      {
        id: 'search_door',
        text: '【寻找边门】\n\n你离开书房，穿过昏暗的走廊。雨声渐小，只有你的脚步声在空荡的宅子里回响。\n\n终于，你来到宅子的尽头——边门就在眼前。\n\n🚪 那是一扇古老的木门，布满铁锈的铰链\n🚪 门缝里渗出潮湿的气息\n🚪 风声在耳边低语，仿佛有人在呼唤你的名字...\n\n时钟敲响 23:45。⏰ 距离午夜只剩 15 分钟。\n\n💭 这就是所有线索指向的地方。答案就在门后。',
        choices: [
          { text: '🔍 检查门锁（进入最终场景）', next: 'sideDoor' }
        ]
      },
      {
        id: 'sideDoor',
        text: '【边门·最终抉择】\n\n你站在边门前，手中紧握着刻有"1201"的钥匙。锁孔就在眼前。\n\n🚪 门缝渗出潮湿的雾气\n🚪 风声在耳边低语："别害怕..."\n🚪 你的手在颤抖\n\n⏰ 时间：23:50，距离午夜只剩 10 分钟\n\n💭 【最后的推理】\n手札上写："午夜前锁上边门，勿回头"\n但现在门是锁着的...\n\n🤔 两种理解：\n   ① "锁上"是指保持锁定，不要打开？\n   ② "锁上"其实暗示"解锁"，因为门已经锁着？\n\n📷 你想起照片上的约定："12.01 雨夜，不见不散"\n✨ 煤油灯的铭文："记忆之门只为勇敢者开启"\n\n💡 真相：这扇门代表你封闭的记忆。打开它，意味着直面过去的遗憾。\n\n【你的选择将决定结局】',
        choices: [
          { text: '🔓 用钥匙打开边门（勇敢直面过去）→ 真结局', next: 'unlock_door' },
          { text: '🤔 感觉不对，重新思考线索（返回推理）', next: 'retreat_think' },
          { text: '😰 太可怕了，逃离这里（放弃挑战）→ BE结局', next: 'ending_bad' }
        ]
      },
      {
        id: 'unlock_door',
        text: '【开启记忆之门】\n\n你深吸一口气，将钥匙插入锁孔。金属摩擦的声音在寂静中格外清晰。\n\n咔哒——\n\n钥匙转动的瞬间，一道白光闪过！\n\n✨ 记忆如潮水般涌来 ✨\n\n那个 12 月 1 日的雨夜...\n你们约定在边门相见...\n但你因为恐惧和犹豫，没有赴约...\n她在雨中等了整夜，最终带着失望离开...\n\n现在，这扇门不只是物理的边门，更是你心中封闭的记忆之门。\n\n你终于鼓起勇气，推开了它。\n\n🌅 门外，暴雨已停，天空泛起鱼肚白。你迈出了囚禁自己的书房，也走出了内心的牢笼。\n\n💭 "勿回头"——不是要你逃避，而是放下过去，勇敢向前。',
        choices: [
          { text: '🚶 踏出边门，迎接黎明（完成游戏）', next: 'ending_good' }
        ]
      },
      {
        id: 'retreat_think',
        text: '【重新思考】\n\n你退回走廊，靠在墙上，重新审视手札上的文字：\n\n💌 "午夜前锁上边门，勿回头"\n\n等等...也许我理解错了？\n\n🤔 如果"锁上"是指"锁住过去的痛苦记忆"呢？\n🤔 如果"勿回头"是说"不要逃避，勇敢面对"呢？\n\n📷 照片上写着"不见不散"——这是一个约定\n✨ 煤油灯说"记忆之门只为勇敢者开启"\n\n💡 现在明白了：我需要打开边门，直面过去的遗憾！\n\n⏰ 时间：23:55，只剩最后 5 分钟',
        choices: [
          { text: '🔙 返回边门，这次不再犹豫', next: 'sideDoor' }
        ]
      }
    ],
    endings: [
      { id: 'ending_good', title: '脱身', summary: '钥匙转动的一瞬，风暴远去。你在雨夜中找到出口，也终于接受了记忆里的告别。', score: 92 },
      { id: 'ending_bad', title: '困于雷声', summary: '你退回书房，任凭雷声在耳边回响。黎明时分，你依旧未能踏出房门。', score: 32 }
    ],
    clues: [
      { id: 'note_diary', name: '神秘手札', desc: '手札提醒：午夜前锁上边门，勿回头。1201...雷雨夜的约定。似乎是逃脱关键。' },
      { id: 'key_info', name: '边门钥匙', desc: '刻着"1201"的旧钥匙，齿位有水渍。这是打开边门的关键道具。' },
      { id: 'diary_torn', name: '撕毁的日记', desc: '12月1日，雨夜。"我决定在边门等她最后一次..."后面的页面被撕掉了。' },
      { id: 'photo', name: '褪色照片', desc: '你和某个人在雨中的合影，背景是边门。记忆之门只为勇敢者开启。' }
    ]
  },
  {
    id: 'echo',
    title: '回声公寓',
    difficulty: 1,
    durationMin: 18,
    intro: '你搬入一间转手多次的公寓，夜里总能听到脚步回声。调查楼道、住户与旧档案，找出回声的来源。',
    tagline: '城市孤岛里的温柔谜案',
    tags: ['都市', '情感', '轻推理'],
    genre: '情感悬疑',
    recommendedFocus: '新手快速上手',
    mood: '温暖而略带惆怅',
    highlight: '通过邻里互动拼凑出真实记忆',
    highlights: [
      { title: '邻里访谈', description: '与管理员、邻居对话获得不同视角的线索。' },
      { title: '声音谜题', description: '回声的节奏暗藏密码，可与档案互相印证。' }
    ],
    sizeMB: 24,
    releaseDaysAgo: 5,
    rating: 4.4,
    offlineAvailable: false,
    hints: [
      { id: 'echo-h1', text: '花香与舞者之间有联系，试着把气味与档案对照。' },
      { id: 'echo-h2', text: '投影仪与脚步声的节奏一致，说明回声来自影像。' }
    ],
    start: 'lobby',
    scenes: [
      {
        id: 'lobby',
        text: '【深夜·公寓大堂】\n\n时钟指向凌晨 1 点。你站在转手多次的公寓大堂里，四周只剩昏黄的值班灯。\n\n楼梯间传来奇怪的回声——像是脚步声，又像是某种节奏...\n\n🎯 【任务目标】\n· 调查公寓，寻找回声的来源\n· 询问管理员或住户了解情况\n· 解开这栋公寓的秘密\n\n💡 新手提示：这是一个温暖的情感谜案，大胆探索吧！',
        choices: [
          { text: '🔺 上楼寻找声源（直接调查）', next: 'stairs' },
          { text: '🚪 敲响管理员室（询问线索）', next: 'concierge' }
        ]
      },
      {
        id: 'stairs',
        text: '【二层走廊】\n\n你沿着楼梯来到二层。走廊尽头的窗户半开，夜风吹进来。\n\n空气中飘着淡淡的花香——是栀子花的味道。这个季节不应该有栀子花...\n\n走廊尽头，一扇旧储物间的门半掩着，里面似乎有什么东西...\n\n✅ 【获得线索 1/2】《栀子花香》\n💭 推理线索：为什么会有栀子花的香味？这和回声有关吗？',
        gainClues: ['scent'],
        choices: [
          { text: '🚪 推开储物间（进入关键场景）', next: 'storage' },
          { text: '🔽 先回到一层问管理员（收集更多线索）', next: 'lobby_return' }
        ]
      },
      {
        id: 'lobby_return',
        text: '【返回大堂】\n\n你回到一层大堂，脚步回声依然在楼梯间回荡。\n\n管理员室的灯还亮着，也许他知道些什么。\n\n💭 思考：应该先了解更多信息再行动。',
        choices: [
          { text: '🚪 敲响管理员室', next: 'concierge' }
        ]
      },
      {
        id: 'concierge',
        text: '【管理员室】\n\n你敲响管理员室的门。一位年迈的管理员打开门，眼神疲惫。\n\n"又听到了？"他叹了口气，从抽屉里取出一份泛黄的档案递给你。\n\n📄 "这是过去五年的住户记录。看看吧...他们都因为夜里的脚步声搬走了。"\n\n档案上密密麻麻记录着搬家日期，每一条后面都备注："夜间噪音"。\n\n✅ 【获得线索 2/2】《搬家档案》\n💭 推理线索：所有住户都听到同样的脚步声...这不是幻觉。',
        gainClues: ['record'],
        choices: [
          { text: '📋 仔细查看档案细节（深入分析）', next: 'files' },
          { text: '🔺 前往二楼楼梯（继续调查）', next: 'stairs_informed' }
        ]
      },
      {
        id: 'stairs_informed',
        text: '【二层走廊·再访】\n\n带着管理员的档案，你再次来到二层走廊。\n\n栀子花香依然飘散...回声依然回荡...\n\n现在你知道了：这里曾经住着很多人，但他们都因为这个声音而离开。\n\n💭 真相就在储物间里。',
        choices: [
          { text: '🚪 推开储物间（寻找答案）', next: 'storage' }
        ]
      },
      {
        id: 'files',
        text: '【档案分析】\n\n你仔细翻阅档案，发现一个规律：\n\n📋 所有搬走的住户都在夜里听见同样的脚步声\n📋 脚步声有固定的节奏："哒...哒哒...哒..."\n📋 档案里有一张泛黄的照片：一位年轻的舞者在走廊里练习\n📋 照片背面写着："301 室，每晚 1 点"\n\n💡 【推理串联】\n   · 栀子花香 + 舞者照片\n   · 固定的脚步节奏 = 舞步？\n   · 301 室...就在二层储物间旁边\n\n现在明白了：回声不是灵异现象，而是某种"残留"...',
        choices: [
          { text: '🔺 前往二层储物间（揭开真相）', next: 'storage_prepared' }
        ]
      },
      {
        id: 'storage',
        text: '【储物间·未知真相】\n\n你推开储物间的门，灰尘扑面而来。\n\n房间里堆满了被遗忘的纸箱和旧家具。角落里，一台老旧的投影仪蒙着灰尘。\n\n投影仪旁边的纸箱上写着："301室遗物，无人认领"。\n\n💭 你可以选择：\n   ① 打开投影仪看看（也许能找到答案）\n   ② 取走纸箱（结束调查）\n\n⚠️ 但你没有收集所有线索，可能会错过重要信息...',
        choices: [
          { text: '📽️ 打开投影仪（寻找真相）', next: 'ending_echo_incomplete' },
          { text: '📦 取走纸箱（放弃调查）→ BE结局', next: 'ending_loop' }
        ]
      },
      {
        id: 'storage_prepared',
        text: '【储物间·真相时刻】\n\n带着对舞者的了解，你推开储物间的门。\n\n房间里堆满旧物，但你的目光被角落的投影仪吸引。纸箱上写着："301室遗物，无人认领"。\n\n📷 你想起档案里的照片：那位喜欢栀子花的年轻舞者\n🎵 你想起脚步声的节奏：哒...哒哒...哒...那是舞步\n\n💡 真相就在这台投影仪里。\n\n【最终选择】',
        choices: [
          { text: '📽️ 打开投影仪（完整真相）→ 真结局', next: 'ending_echo' },
          { text: '📦 取走纸箱离开（放弃真相）→ BE结局', next: 'ending_loop' }
        ]
      },
      {
        id: 'ending_echo_incomplete',
        text: '【投影仪·不完整的真相】\n\n你打开投影仪，白色的光束投射在墙上。\n\n画面出现了：一位年轻女孩在房间里练习舞蹈，脚步轻盈优雅...\n\n视频结束了。你只看到了影像，却不知道她的故事。\n\n回声依然在夜里回响...或许你永远不会知道完整的真相。',
        choices: [
          { text: '📄 返回查看档案（重新调查）', next: 'concierge' },
          { text: '🚪 离开公寓（结束游戏）', next: 'ending_echo' }
        ]
      }
    ],
    endings: [
      { id: 'ending_echo', title: '真相回声', summary: '投影仪播放着前住户练舞的影像。你将它送回家属，回声自此归于静默。', score: 85 },
      { id: 'ending_loop', title: '回声轮回', summary: '你带走纸箱，回声依旧在夜里出现。或许你只是成为下一个见证者。', score: 55 }
    ],
    clues: [
      { id: 'scent', name: '栀子花香', desc: '二层走廊的花香，似乎和旧档案里的舞者有关。' },
      { id: 'record', name: '搬家档案', desc: '管理员的档案记录了频繁搬离的住户。' }
    ]
  },
  {
    id: 'atelier',
    title: '静物画室',
    difficulty: 3,
    durationMin: 35,
    intro: '著名绘画导师的画室突然封闭。你受邀进入画室，寻找失踪的学生与隐藏在作品中的留言。',
    tagline: '在色块与笔触间解读真相',
    tags: ['艺术', '多结局', '逻辑推理'],
    genre: '心理悬疑',
    recommendedFocus: '喜欢多线索交织的玩家',
    mood: '冷冽而理性',
    highlight: '每幅画都是解谜密码，收集色号决定结局',
    highlights: [
      { title: '色卡拼图', description: '不同色块对应字母，拼合后是储物柜密码。' },
      { title: '暗房底片', description: '底片记录学生情绪，可决定最终结局。' },
      { title: '导师手稿', description: '手稿提示师生矛盾，用于判断不同分支。' }
    ],
    sizeMB: 48,
    releaseDaysAgo: 38,
    rating: 4.8,
    offlineAvailable: true,
    hints: [
      { id: 'atelier-h1', text: '色卡上标注的“锁”与储物柜形状一致，考虑颜色顺序。' },
      { id: 'atelier-h2', text: '暗房底片与手稿搭配阅读，能看出学生失踪的真正原因。' }
    ],
    start: 'studio',
    scenes: [
      {
        id: 'studio',
        text: '画室布满半完成的静物画。调色盘上残留着鲜艳的红。',
        choices: [
          { text: '检查画架', next: 'easel' },
          { text: '翻看导师手稿', next: 'notes' }
        ]
      },
      {
        id: 'easel',
        text: '画架旁散落着色卡。某些色块被标注为“锁”“出口”。',
        gainClues: ['palette'],
        choices: [
          { text: '拼合色卡', next: 'ending_truth', require: { hasClue: true } },
          { text: '继续搜查', next: 'storeroom', setFlags: { hasClue: true } }
        ]
      },
      {
        id: 'notes',
        text: '手稿记录着学生的练习计划，也暗藏导师的不安。',
        gainClues: ['note_teacher'],
        choices: [
          { text: '前往暗房', next: 'darkroom' },
          { text: '返回画室', next: 'studio' }
        ]
      },
      {
        id: 'storeroom',
        text: '储物柜上锁，但锁孔与某个色卡形状相似。',
        choices: [
          { text: '合上色卡开锁', next: 'ending_rescue', require: { hasClue: true } },
          { text: '放弃', next: 'studio' }
        ]
      },
      {
        id: 'darkroom',
        text: '暗房里晾着学生的底片，影像显得孤独。',
        choices: [
          { text: '解析底片', next: 'ending_reflect' },
          { text: '返回画室', next: 'studio' }
        ]
      }
    ],
    endings: [
      { id: 'ending_truth', title: '真相定格', summary: '你组合色卡，打开画室的天窗，师生终于坦白彼此的焦虑与期待。', score: 95 },
      { id: 'ending_rescue', title: '暗室救赎', summary: '储物柜中藏着学生留下的道歉字条与联络方式，你成功让导师与学生重逢。', score: 88 },
      { id: 'ending_reflect', title: '独自写生', summary: '你选择保留秘密，让画室维持平衡。导师继续创作，只是画作愈发孤独。', score: 60 }
    ],
    clues: [
      { id: 'palette', name: '色卡碎片', desc: '拼合后的色卡构成密码，是开启储物柜的关键。' },
      { id: 'note_teacher', name: '导师手稿', desc: '记录学生的练习与导师的忧虑，暗示矛盾来源。' }
    ]
  }
];
