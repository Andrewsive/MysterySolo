# 🎮 MysterySolo - 交互式剧本推理游戏

<div align="center">

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![Platform](https://img.shields.io/badge/platform-HarmonyOS-brightgreen.svg)
![Language](https://img.shields.io/badge/language-ArkTS-orange.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

一款沉浸式交互式剧情推理游戏，带你进入扣人心弦的推理世界

[功能特性](#-功能特性) • [快速开始](#-快速开始) • [游戏玩法](#-游戏玩法) • [技术架构](#-技术架构) • [贡献指南](#-贡献指南)

</div>

---

## 📖 项目简介

**MysterySolo** 是一款基于 HarmonyOS 开发的交互式剧本推理游戏应用。玩家将扮演主角，通过收集线索、推理分析、做出选择来推进剧情，最终揭开隐藏的真相。

### 🎯 核心理念

- **🔍 沉浸式叙事**：精心打磨的剧情文本，细腻的环境描写
- **💭 推理体验**：多条线索互相印证，完整的推理链条
- **🎭 多元结局**：根据玩家选择解锁不同结局
- **✨ 新手友好**：完善的引导系统和提示机制

---

## 🎬 游戏剧本

### 已上线剧本

#### 🌙 午夜书房
- **类型**：情感 · 推理
- **难度**：★★★☆☆（进阶）
- **时长**：20-30 分钟
- **简介**：暴雨夜被困在神秘的书房，收集散落的线索，在午夜前找到出口，直面封存的记忆
- **特色**：4条互相印证的线索，温暖的情感主题

#### 🏢 回声公寓
- **类型**：都市 · 轻推理
- **难度**：★★☆☆☆（新手）
- **时长**：15-20 分钟
- **简介**：深夜的公寓传来神秘回声，探索这栋转手多次的建筑，揭开舞者的遗憾
- **特色**：温暖的结局，情感共鸣优先

#### 🎨 静物画室
- **类型**：艺术 · 逻辑推理
- **难度**：★★★★☆（硬核）
- **时长**：30-40 分钟
- **简介**：艺术系最高难度，需要通过画作细节进行逻辑推理
- **特色**：挑战性强，适合推理爱好者

---

## ✨ 功能特性

### 🎮 游戏核心功能

- **📚 剧本图书馆**
  - 精选剧本列表，支持按主题、类型、难度筛选
  - 剧本详情页展示剧情简介、标签、评分
  - 特色剧本推荐和热门榜单

- **🎯 游戏进行界面**
  - 流畅的剧情展示和选项交互
  - 实时线索收集进度显示
  - 线索簿功能，查看已获得的所有线索
  - 智能提示系统（最多2次）
  - 重新开始功能

- **📝 笔记系统**
  - 记录推理思路和关键信息
  - 支持添加、编辑、删除笔记
  - 按剧本分类管理

- **🏆 成就系统**
  - 完美通关、真相揭示者等多种成就
  - 成就进度追踪
  - 解锁奖励机制

- **📊 历史记录**
  - 查看历史游玩记录
  - 查看不同选择路径的结局
  - 回放功能支持

- **⚙️ 个性化设置**
  - 深色/浅色主题切换
  - 文字大小调节
  - 自动保存进度
  - 阅读速度调整

### 🌐 内容管理

- **📥 下载管理**
  - 剧本离线下载
  - 下载进度和状态管理
  - 本地剧本库管理

- **👤 个人中心**
  - 用户信息管理
  - 游戏统计数据
  - 设置和偏好配置

---

## 🎮 游戏玩法

### 基本流程

```
1. 📖 选择剧本
   ↓
2. 🔍 阅读剧情 → 收集线索
   ↓
3. 💭 推理分析 → 串联线索
   ↓
4. 🎯 做出选择 → 推进剧情
   ↓
5. 🎬 解锁结局 → 查看评分
```

### 游戏技巧

#### 🔍 探索阶段
- **仔细阅读**：注意场景中的细节描述
- **收集完整**：尽量收集所有线索再推进剧情
- **善用线索簿**：定期查看已收集的线索，整理思路

#### 💭 推理阶段
- **寻找共同点**：不同线索中重复出现的信息是关键
- **注意标记**：💡（提示）、💭（推理线索）、⏰（时间进度）
- **时间线重要**：注意剧情中的时间和日期

#### 🚪 决策阶段
- **查看标注**：选项说明会告诉你行动的目的和后果
- **勇敢选择**：可以重新开始，尝试不同路线
- **不用担心**：游戏鼓励探索，错误也是体验的一部分

### 评分系统

游戏会根据以下因素计算最终评分：

- ✅ **线索收集完整度**（0-40分）
- 💡 **提示使用次数**（0-20分，使用越少分数越高）
- 🎯 **选择的结局类型**（0-40分，真结局得分更高）

---

## 🚀 快速开始

### 环境要求

- **操作系统**：Windows 10/11、macOS 或 Linux
- **开发工具**：DevEco Studio 5.0.0 或更高版本
- **SDK版本**：HarmonyOS API 12 或更高
- **Node.js**：16.x 或更高（用于 hvigor 构建工具）

### 安装步骤

1. **克隆项目**

```bash
git clone https://github.com/yourusername/MysterySolo.git
cd MysterySolo
```

2. **安装依赖**

```bash
# hvigor 会自动安装依赖
# 或者手动执行
ohpm install
```

3. **打开项目**

使用 DevEco Studio 打开项目目录

4. **连接设备或启动模拟器**

- 连接 HarmonyOS 真机并开启开发者模式
- 或启动 HarmonyOS 模拟器

5. **运行应用**

```bash
# 在 DevEco Studio 中点击运行按钮
# 或使用命令行
hvigorw assembleHap
```

### 目录结构

```
MysterySolo/
├── AppScope/                  # 应用全局配置
│   ├── app.json5             # 应用配置文件
│   └── resources/            # 全局资源
├── entry/                     # 主模块
│   ├── src/
│   │   ├── main/
│   │   │   ├── ets/          # ArkTS 源代码
│   │   │   │   ├── entryability/      # Ability 入口
│   │   │   │   ├── model/             # 数据模型
│   │   │   │   │   ├── engine.ts      # 游戏引擎
│   │   │   │   │   ├── scripts.ts     # 剧本数据
│   │   │   │   │   ├── store.ts       # 数据存储
│   │   │   │   │   ├── types.ts       # 类型定义
│   │   │   │   │   └── progress.ts    # 进度管理
│   │   │   │   └── pages/             # 页面组件
│   │   │   │       ├── HomePage.ets           # 主页
│   │   │   │       ├── LibraryPage.ets        # 图书馆
│   │   │   │       ├── PlayPage.ets           # 游戏页
│   │   │   │       ├── DetailPage.ets         # 剧本详情
│   │   │   │       ├── NotesPage.ets          # 笔记
│   │   │   │       ├── AchievementsPage.ets   # 成就
│   │   │   │       ├── HistoryDetailPage.ets  # 历史记录
│   │   │   │       ├── SettingsPage.ets       # 设置
│   │   │   │       └── ...
│   │   │   └── resources/    # 资源文件
│   │   ├── ohosTest/         # 单元测试
│   │   └── mock/             # Mock 数据
│   └── build-profile.json5   # 构建配置
├── oh_modules/               # 依赖模块
├── hvigor/                   # 构建工具配置
├── docs/                     # 文档目录
│   ├── 玩家快速指南.md
│   ├── 游戏体验优化说明.md
│   └── 回声公寓优化说明.md
└── README.md                 # 本文件
```

---

## 🛠 技术架构

### 技术栈

- **开发语言**：ArkTS（TypeScript for HarmonyOS）
- **UI框架**：ArkUI（声明式UI框架）
- **状态管理**：@State、@Prop、@Link 装饰器
- **数据持久化**：Preferences API
- **测试框架**：Hypium + Hamock

### 核心模块

#### 🎮 游戏引擎（engine.ts）

负责游戏逻辑的核心处理：

- 场景状态管理
- 选项处理和场景跳转
- 线索收集和验证
- 结局判定和评分计算

#### 📚 剧本系统（scripts.ts）

存储和管理所有剧本数据：

```typescript
interface Scene {
  id: string;              // 场景唯一标识
  text: string;            // 场景文本
  choices?: Choice[];      // 可选行动
  clues?: Clue[];         // 可获得的线索
  autoTransition?: string; // 自动跳转
}

interface Choice {
  text: string;           // 选项文本
  next: string;           // 下一个场景 ID
  condition?: string;     // 前置条件
}
```

#### 💾 数据存储（store.ts）

管理应用数据的持久化：

- 游戏进度保存和加载
- 用户偏好设置
- 成就和历史记录
- 笔记数据

#### 🎨 UI主题（uiTheme.ts）

统一的UI设计系统：

- 温暖主题色彩
- 阴影效果
- 圆角和间距规范
- 深色/浅色模式适配

### 设计模式

- **状态模式**：管理游戏不同状态的转换
- **观察者模式**：响应式UI更新
- **工厂模式**：场景和线索对象创建
- **单例模式**：全局数据存储管理

---

## 📱 界面展示

### 主要页面

- **🏠 主页**：精选推荐、剧本分类、搜索筛选
- **📚 图书馆**：所有剧本列表，支持多维度筛选
- **🎮 游戏页**：沉浸式游戏界面，线索簿、提示系统
- **📖 剧本详情**：剧本简介、标签、评分、下载
- **🏆 成就页**：成就列表、进度追踪
- **📝 笔记页**：推理笔记编辑和管理
- **👤 个人中心**：用户信息、统计数据

### UI特色

- **🎨 温暖配色**：米色、棕色为主色调，营造温馨氛围
- **📱 响应式设计**：适配不同屏幕尺寸
- **✨ 流畅动画**：页面切换和交互动画
- **🌙 深色模式**：支持系统深色模式跟随

---

## 🧪 测试

### 运行测试

```bash
# 运行所有测试
hvigorw test

# 运行单元测试
hvigorw test --testType unit

# 运行UI测试
hvigorw test --testType ui
```

### 测试覆盖

- ✅ 游戏引擎逻辑测试
- ✅ 场景跳转测试
- ✅ 线索收集测试
- ✅ 结局判定测试
- ✅ UI组件测试

---

## 📦 构建和发布

### 构建HAP包

```bash
# Debug版本
hvigorw assembleHap

# Release版本
hvigorw assembleHap --mode release
```

### 签名配置

1. 在 DevEco Studio 中配置签名证书
2. 在 `build-profile.json5` 中配置签名信息
3. 构建签名后的HAP包

### 发布到应用市场

1. 在 HarmonyOS 应用市场创建应用
2. 上传签名后的HAP包
3. 填写应用信息和截图
4. 提交审核

---

## 🤝 贡献指南

我们欢迎所有形式的贡献！

### 如何贡献

1. **Fork 本仓库**
2. **创建特性分支** (`git checkout -b feature/AmazingFeature`)
3. **提交更改** (`git commit -m '添加某个新特性'`)
4. **推送到分支** (`git push origin feature/AmazingFeature`)
5. **创建 Pull Request**

### 贡献类型

- 🐛 **Bug修复**：发现并修复问题
- ✨ **新功能**：添加新的游戏功能或剧本
- 📝 **文档**：改进文档和示例
- 🎨 **UI优化**：改进界面设计
- ⚡ **性能优化**：提升应用性能
- 🧪 **测试**：添加或改进测试用例

### 剧本创作指南

如果您想贡献新的剧本，请参考以下结构：

1. **开场场景**：明确任务目标和情境
2. **探索场景**：3-4条互相印证的线索
3. **推理场景**：帮助玩家串联线索
4. **决策场景**：提供多个选择分支
5. **结局场景**：揭示真相，给予评分

详细指南请参考 [游戏体验优化说明.md](游戏体验优化说明.md)

---

## 📄 开源协议

本项目采用 MIT 协议开源，详见 [LICENSE](LICENSE) 文件。

---

## 👥 团队

- **开发者**：陈奕辰
- **Bundle Name**：com.yichen.mysterysolo
- **版本**：1.0.0

---

## 📞 联系方式

- **问题反馈**：[GitHub Issues](https://github.com/yourusername/MysterySolo/issues)
- **功能建议**：[GitHub Discussions](https://github.com/yourusername/MysterySolo/discussions)
- **邮箱**：your.email@example.com

---

## 🙏 致谢

感谢所有为本项目做出贡献的开发者和玩家！

特别感谢：
- HarmonyOS 开发团队提供的优秀开发平台
- 所有提供反馈和建议的玩家
- 开源社区的支持

---

## 📚 相关文档

- [玩家快速指南](玩家快速指南.md) - 游戏玩法详细说明
- [游戏体验优化说明](游戏体验优化说明.md) - 游戏设计理念和优化历程
- [回声公寓优化说明](回声公寓优化说明.md) - 剧本创作参考

---

## 🎉 开始游戏

现在，让我们开始一场扣人心弦的推理之旅吧！

```bash
# 启动应用
hvigorw clean
hvigorw assembleHap --mode module -p product=default
```

**祝您游戏愉快！** 🎮✨

---

<div align="center">

**[⬆ 回到顶部](#-mysterysolo---交互式剧本推理游戏)**

Made with ❤️ by 陈奕辰

</div>

